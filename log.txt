[2025-08-10 21:11:53,517] INFO in dashboard: === DASHBOARD ROUTE START ===
[2025-08-10 21:11:53,517] DEBUG in dashboard: Dashboard: Fetching total users count
[2025-08-10 21:11:53,519] DEBUG in dashboard: Dashboard: Total users: 61
[2025-08-10 21:11:53,519] DEBUG in dashboard: Dashboard: Fetching active invites count
[2025-08-10 21:11:53,521] DEBUG in dashboard: Dashboard: Active invites: 2
[2025-08-10 21:11:53,521] DEBUG in dashboard: Dashboard: Setting active streams count to 0 for initial load (will be fetched asynchronously)
[2025-08-10 21:11:53,521] DEBUG in dashboard: Dashboard: Getting server list (DB only, no API calls)
[2025-08-10 21:11:53,522] DEBUG in dashboard: Dashboard: Found 3 servers in database
[2025-08-10 21:11:53,522] DEBUG in dashboard: Dashboard: Server status data prepared (loading state)
[2025-08-10 21:11:53,522] DEBUG in dashboard: Dashboard: Fetching recent activities
[2025-08-10 21:11:53,526] DEBUG in dashboard: Dashboard: Recent activities: 10, total count: 456
[2025-08-10 21:11:53,527] INFO in dashboard: Dashboard: Rendering template with data
[2025-08-10 21:11:53,527] DEBUG in dashboard: Dashboard: Template data - users: 61, invites: 2, streams: 0, servers: 3, activities: 10
[2025-08-10 21:11:53,545] INFO in dashboard: === DASHBOARD ROUTE COMPLETE ===
[2025-08-10 21:11:53,961] WARNING in api: === API ENDPOINT: /dashboard/active-streams-count called ===
[2025-08-10 21:11:53,961] DEBUG in api: Api.py - get_active_streams_count(): Loading active streams count for dashboard
[2025-08-10 21:11:53,961] WARNING in api: API: Calling MediaServiceManager.get_all_active_sessions() for streams count
[2025-08-10 21:11:53,961] WARNING in media_service_manager: MediaServiceManager.get_all_active_sessions() called - THIS MAKES API CALLS TO ALL SERVERS
[2025-08-10 21:11:53,964] DEBUG in media_service_manager: MediaServiceManager: Found 3 servers to check for active sessions
[2025-08-10 21:11:53,964] WARNING in media_service_manager: MediaServiceManager: Making API call to server 'Plex++++' (plex) at http://192.168.68.56:32400
[2025-08-10 21:11:53,964] DEBUG in media_service_manager: MediaServiceManager: Calling get_active_sessions() for Plex++++
[2025-08-10 21:11:53,979] DEBUG in media_service_manager: MediaServiceManager: Got 1 sessions from Plex++++
[2025-08-10 21:11:53,979] WARNING in media_service_manager: MediaServiceManager: Making API call to server 'jellyttthhuuu' (jellyfin) at http://192.168.68.56:8096
[2025-08-10 21:11:53,979] DEBUG in media_service_manager: MediaServiceManager: Calling get_active_sessions() for jellyttthhuuu
[2025-08-10 21:11:53,979] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Making GET request to endpoint: Sessions
[2025-08-10 21:11:53,980] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Initializing new Jellyfin client
[2025-08-10 21:11:53,980] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Connecting to Jellyfin server: http://192.168.68.56:8096
[2025-08-10 21:11:53,980] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Client configured - SSL: False
[2025-08-10 21:11:53,980] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Attempting to connect to Jellyfin server...
[2025-08-10 21:11:53,989] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Connection established, attempting authentication...
[2025-08-10 21:11:53,989] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Setting API token directly in client configuration
[2025-08-10 21:11:53,989] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Authentication successful
[2025-08-10 21:11:53,989] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Falling back to requests session with manual headers (client session is None or unavailable)
[2025-08-10 21:11:53,989] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Full request URL: http://192.168.68.56:8096/Sessions
[2025-08-10 21:11:53,990] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Request headers: {'User-Agent': 'python-requests/2.32.4', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Emby-Token': '83f5b80b...', 'Content-Type': 'application/json'}
[2025-08-10 21:11:53,997] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Response status: 200
[2025-08-10 21:11:53,997] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Response headers: {'Content-Type': 'application/json; charset=utf-8', 'Date': 'Mon, 11 Aug 2025 03:11:53 GMT', 'Server': 'Kestrel', 'Content-Encoding': 'gzip', 'Transfer-Encoding': 'chunked', 'Vary': 'Accept-Encoding', 'X-Response-Time-ms': '0.6876'}
[2025-08-10 21:11:53,997] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Response data type: <class 'list'>, length: 1
[2025-08-10 21:11:53,998] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Retrieved 1 total sessions from Jellyfin
[2025-08-10 21:11:53,998] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Skipping inactive session: f0ab899d71efcc5bfe89c7cc516188c3
[2025-08-10 21:11:53,998] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Returning 0 active sessions from Jellyfin
[2025-08-10 21:11:53,998] DEBUG in media_service_manager: MediaServiceManager: Got 0 sessions from jellyttthhuuu
[2025-08-10 21:11:53,998] WARNING in media_service_manager: MediaServiceManager: Making API call to server 'kavitaaaaaa' (kavita) at https://kavita.abom.cloud
[2025-08-10 21:11:53,998] DEBUG in media_service_manager: MediaServiceManager: Calling get_active_sessions() for kavitaaaaaa
[2025-08-10 21:11:53,998] DEBUG in media_service_manager: MediaServiceManager: Got 0 sessions from kavitaaaaaa
[2025-08-10 21:11:53,998] WARNING in media_service_manager: MediaServiceManager: Total sessions found across all servers: 1
[2025-08-10 21:11:53,998] DEBUG in api: API: Active streams count: 1
[2025-08-10 21:11:54,074] WARNING in api: === API ENDPOINT: /dashboard/server-status called ===
[2025-08-10 21:11:54,074] DEBUG in api: Api.py - get_dashboard_server_status(): Loading server status for dashboard
[2025-08-10 21:11:54,074] WARNING in api: API: get_cached_server_status() called - checking cache
[2025-08-10 21:11:54,074] WARNING in api: API: Cache expired/empty, fetching fresh server status data - THIS WILL MAKE API CALLS
[2025-08-10 21:11:54,074] WARNING in api: API: _fetch_server_status() called - THIS WILL MAKE API CALLS TO ALL SERVERS
[2025-08-10 21:11:54,076] DEBUG in api: API: Found 3 servers to check status
[2025-08-10 21:11:54,076] WARNING in api: API: Making API calls to 3 servers for status check
[2025-08-10 21:11:54,076] WARNING in api: API: Making API call to server 'Plex++++' (plex) at http://192.168.68.56:32400
[2025-08-10 21:11:54,108] DEBUG in api: API: Server 'Plex++++' status: True
[2025-08-10 21:11:54,108] WARNING in api: API: Making API call to server 'jellyttthhuuu' (jellyfin) at http://192.168.68.56:8096
[2025-08-10 21:11:54,109] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Making GET request to endpoint: System/Info
[2025-08-10 21:11:54,109] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Initializing new Jellyfin client
[2025-08-10 21:11:54,109] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Connecting to Jellyfin server: http://192.168.68.56:8096
[2025-08-10 21:11:54,109] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Client configured - SSL: False
[2025-08-10 21:11:54,109] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Attempting to connect to Jellyfin server...
[2025-08-10 21:11:54,115] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Connection established, attempting authentication...
[2025-08-10 21:11:54,115] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Setting API token directly in client configuration
[2025-08-10 21:11:54,115] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Authentication successful
[2025-08-10 21:11:54,115] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Falling back to requests session with manual headers (client session is None or unavailable)
[2025-08-10 21:11:54,115] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Full request URL: http://192.168.68.56:8096/System/Info
[2025-08-10 21:11:54,116] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Request headers: {'User-Agent': 'python-requests/2.32.4', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Emby-Token': '83f5b80b...', 'Content-Type': 'application/json'}
[2025-08-10 21:11:54,123] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Response status: 200
[2025-08-10 21:11:54,124] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Response headers: {'Content-Type': 'application/json; charset=utf-8', 'Date': 'Mon, 11 Aug 2025 03:11:53 GMT', 'Server': 'Kestrel', 'Content-Encoding': 'gzip', 'Transfer-Encoding': 'chunked', 'Vary': 'Accept-Encoding', 'X-Response-Time-ms': '0.7518'}
[2025-08-10 21:11:54,124] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Response data type: <class 'dict'>, length: 24
[2025-08-10 21:11:54,124] DEBUG in base_media_service: [JELLYFIN:jellyttthhuuu] Jellyfin server info - ServerName: 'ABOM', Version: '10.10.7'
[2025-08-10 21:11:54,124] DEBUG in api: API: Server 'jellyttthhuuu' status: True
[2025-08-10 21:11:54,124] WARNING in api: API: Making API call to server 'kavitaaaaaa' (kavita) at https://kavita.abom.cloud
[2025-08-10 21:11:54,124] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Making GET request to: https://kavita.abom.cloud/api/Server/server-info-slim
[2025-08-10 21:11:54,732] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Response status: 200
[2025-08-10 21:11:54,732] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Response headers: {'Date': 'Mon, 11 Aug 2025 03:11:54 GMT', 'Content-Type': 'application/json; charset=utf-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Alt-Svc': 'h3=":443"; ma=86400', 'Report-To': '{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=ZLgJ%2BuEIoig84TwJEb%2BXHX1xiG46es5WDbacO7J4HHeB1C8KEADLAk7RdsIwN1jabAxjVAk27Y1IWpf0hpFOznfMMSQBnJofyoT2T8i6oGH9"}]}', 'Content-Security-Policy': "frame-ancestors 'none';", 'Server': 'cloudflare', 'Vary': 'Accept-Encoding', 'X-Frame-Options': 'SAMEORIGIN', 'Cf-Cache-Status': 'DYNAMIC', 'Nel': '{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}', 'Content-Encoding': 'gzip', 'CF-RAY': '96d48c5e39871026-LAX'}
[2025-08-10 21:11:54,733] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Response content length: 139
[2025-08-10 21:11:54,733] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Server/server-info-slim endpoint request headers: {'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiYWRtaW4iLCJuYW1laWQiOiIxIiwicm9sZSI6WyJBZG1pbiIsIkxvZ2luIl0sIm5iZiI6MTc1NDg4MDY5OCwiZXhwIjoxNzU1NzQ0Njk4LCJpYXQiOjE3NTQ4ODA2OTh9.VvLrGFar7zEw1TgGrLHOu5njUns_1mhCkzNHDwvrs9dEL4HtV_G16ryWINuGb7J3EnKAe4gOLj4iCzdzXBXPeg', 'Content-Type': 'application/json'}
[2025-08-10 21:11:54,733] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Server/server-info-slim endpoint response status: 200
[2025-08-10 21:11:54,733] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Server/server-info-slim endpoint response headers: {'Date': 'Mon, 11 Aug 2025 03:11:54 GMT', 'Content-Type': 'application/json; charset=utf-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Alt-Svc': 'h3=":443"; ma=86400', 'Report-To': '{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=ZLgJ%2BuEIoig84TwJEb%2BXHX1xiG46es5WDbacO7J4HHeB1C8KEADLAk7RdsIwN1jabAxjVAk27Y1IWpf0hpFOznfMMSQBnJofyoT2T8i6oGH9"}]}', 'Content-Security-Policy': "frame-ancestors 'none';", 'Server': 'cloudflare', 'Vary': 'Accept-Encoding', 'X-Frame-Options': 'SAMEORIGIN', 'Cf-Cache-Status': 'DYNAMIC', 'Nel': '{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}', 'Content-Encoding': 'gzip', 'CF-RAY': '96d48c5e39871026-LAX'}
[2025-08-10 21:11:54,733] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Server/server-info-slim endpoint response content: '{"installId":"c34f3a2c","isDocker":true,"kavitaVersion":"0.8.7.0","firstInstallDate":"2024-10-09T23:27:49","firstInstallVersion":"0.8.3.2"}...'
[2025-08-10 21:11:54,733] DEBUG in base_media_service: [KAVITA:kavitaaaaaa] Server/server-info-slim endpoint response content length: 139
[2025-08-10 21:11:54,733] DEBUG in api: API: Server 'kavitaaaaaa' status: True
[2025-08-10 21:11:54,734] DEBUG in api: API: Server status cache updated
[2025-08-10 21:11:54,734] DEBUG in api: Api.py - get_dashboard_server_status(): Server status from cache: {'multi_server': True, 'online_count': 3, 'offline_count': 0, 'all_statuses': [{'name': 'Plex++++', 'url': 'http://192.168.68.56:32400', 'service_type': 'plex', 'online': True, 'version': '1.42.1.10054-f333bdaa8', 'machine_id': '1851993e7c714612ac048a20da5e061312ce69db', 'server_id': 1, 'custom_name': 'Plex++++', 'actual_server_name': 'Plex+'}, {'name': 'jellyttthhuuu', 'url': 'http://192.168.68.56:8096', 'service_type': 'jellyfin', 'online': True, 'version': '10.10.7', 'server_id': 2, 'actual_server_name': 'ABOM', 'error_message': None, 'custom_name': 'jellyttthhuuu'}, {'name': 'kavitaaaaaa', 'url': 'https://kavita.abom.cloud', 'service_type': 'kavita', 'online': True, 'version': '0.8.7.0', 'server_id': 3, 'custom_name': 'kavitaaaaaa', 'actual_server_name': 'Kavita (c34f3a2c)'}], 'servers_by_service': {'plex': {'service_name': 'Plex', 'servers': [{'name': 'Plex++++', 'url': 'http://192.168.68.56:32400', 'service_type': 'plex', 'online': True, 'version': '1.42.1.10054-f333bdaa8', 'machine_id': '1851993e7c714612ac048a20da5e061312ce69db', 'server_id': 1, 'custom_name': 'Plex++++', 'actual_server_name': 'Plex+'}], 'online_count': 1, 'offline_count': 0, 'total_count': 1}, 'jellyfin': {'service_name': 'Jellyfin', 'servers': [{'name': 'jellyttthhuuu', 'url': 'http://192.168.68.56:8096', 'service_type': 'jellyfin', 'online': True, 'version': '10.10.7', 'server_id': 2, 'actual_server_name': 'ABOM', 'error_message': None, 'custom_name': 'jellyttthhuuu'}], 'online_count': 1, 'offline_count': 0, 'total_count': 1}, 'kavita': {'service_name': 'Kavita', 'servers': [{'name': 'kavitaaaaaa', 'url': 'https://kavita.abom.cloud', 'service_type': 'kavita', 'online': True, 'version': '0.8.7.0', 'server_id': 3, 'custom_name': 'kavitaaaaaa', 'actual_server_name': 'Kavita (c34f3a2c)'}], 'online_count': 1, 'offline_count': 0, 'total_count': 1}}}
[2025-08-10 21:11:55,093] INFO in api: API: Raw session monitoring setting from DB: '120' (type: <class 'int'>)
[2025-08-10 21:11:55,093] INFO in api: API: Successfully converted to int: 120
[2025-08-10 21:11:55,093] INFO in api: API: Returning session monitoring interval: 120 seconds
