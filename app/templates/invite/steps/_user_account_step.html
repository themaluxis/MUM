<!-- User Account Creation Step app\templates\invite\steps\_user_account_step.html -->
<div class="step-section bg-base-200/30 border border-base-300 rounded-lg p-6" id="user-account-step">
    <!-- Step Header -->
    <div class="flex items-center gap-3 mb-6">
        <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0">
            <i class="fa-solid fa-user-plus text-primary text-lg"></i>
        </div>
        <div>
            <h2 class="text-xl font-semibold text-base-content mb-1">Set Up Your Account</h2>
            <p class="text-sm text-base-content/70">
                Configure your account details - your account will be created when you complete all steps
            </p>
        </div>
    </div>

    <form method="POST" action="{{ url_for('invites.process_invite_form', invite_path_or_token=invite_path_or_token) }}">
        {{ form.hidden_tag() }}
        
        <div class="space-y-4">
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium text-sm">{{ account_form.username.label.text }}</span>
                </label>
                {{ account_form.username(class="input input-bordered w-full h-11 bg-base-100 border-base-300 focus:border-primary focus:bg-base-100") }}
                {% if account_form.username.description %}
                    <label class="label">
                        <span class="label-text-alt text-xs text-base-content/60">{{ account_form.username.description }}</span>
                    </label>
                {% endif %}
            </div>

            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium text-sm">{{ account_form.email.label.text }}</span>
                </label>
                {{ account_form.email(class="input input-bordered w-full h-11 bg-base-100 border-base-300 focus:border-primary focus:bg-base-100") }}
                {% if account_form.email.description %}
                    <label class="label">
                        <span class="label-text-alt text-xs text-base-content/60">{{ account_form.email.description }}</span>
                    </label>
                {% endif %}
            </div>

            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium text-sm">{{ account_form.password.label.text }}</span>
                </label>
                {{ account_form.password(class="input input-bordered w-full h-11 bg-base-100 border-base-300 focus:border-primary focus:bg-base-100") }}
                {% if account_form.password.description %}
                    <label class="label">
                        <span class="label-text-alt text-xs text-base-content/60">{{ account_form.password.description }}</span>
                    </label>
                {% endif %}
            </div>

            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium text-sm">{{ account_form.confirm_password.label.text }}</span>
                </label>
                {{ account_form.confirm_password(class="input input-bordered w-full h-11 bg-base-100 border-base-300 focus:border-primary focus:bg-base-100") }}
                {% if account_form.confirm_password.description %}
                    <label class="label">
                        <span class="label-text-alt text-xs text-base-content/60">{{ account_form.confirm_password.description }}</span>
                    </label>
                {% endif %}
            </div>

            <!-- Cross-Server Credential Options -->
            <div class="bg-info/10 border border-info/20 rounded-lg p-4 mt-6">
                <div class="flex items-start gap-3 mb-4">
                    <div class="w-6 h-6 rounded-full bg-info/20 flex items-center justify-center flex-shrink-0 mt-0.5">
                        <i class="fa-solid fa-link text-info text-xs"></i>
                    </div>
                    <div>
                        <h4 class="font-medium text-info mb-1">Cross-Server Convenience</h4>
                        <p class="text-sm text-base-content/80">
                            Use the same credentials across all media servers for easier access
                        </p>
                    </div>
                </div>
                
                <div class="space-y-3">
                    <div class="form-control">
                        <label class="label cursor-pointer justify-start gap-3">
                            <input type="checkbox" name="use_same_username" value="true" class="checkbox checkbox-primary checkbox-sm" checked>
                            <div>
                                <span class="label-text font-medium text-sm">Use same username across servers</span>
                                <div class="label-text-alt text-xs text-base-content/60 mt-0.5">
                                    Your local account username will be used for all media servers (if available)
                                </div>
                            </div>
                        </label>
                    </div>
                    
                    <div class="form-control">
                        <label class="label cursor-pointer justify-start gap-3">
                            <input type="checkbox" name="use_same_password" value="true" class="checkbox checkbox-primary checkbox-sm" checked>
                            <div>
                                <span class="label-text font-medium text-sm">Use same password across servers</span>
                                <div class="label-text-alt text-xs text-base-content/60 mt-0.5">
                                    Your local account password will be used for all media servers
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="pt-4">
                <button name="action" value="create_user_account" type="submit" class="btn btn-primary w-full h-12 text-base font-medium">
                    <i class="fa-solid fa-save mr-2"></i>
                    Save Account Details & Continue
                </button>
            </div>
        </div>
    </form>
</div>