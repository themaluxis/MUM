<!-- All Servers Configured - Success Step app\templates\invite\steps\_success_step.html -->
<div class="step-section bg-gradient-to-br from-success/10 to-primary/10 border border-success/20 rounded-lg p-8" id="final-step">
    <!-- Success Header -->
    <div class="text-center mb-8">
        <div class="w-20 h-20 rounded-full bg-success/20 flex items-center justify-center mx-auto mb-6">
            <i class="fa-solid fa-check-circle text-success text-3xl"></i>
        </div>
        <h2 class="text-2xl font-bold text-success mb-3">Ready to Complete Setup!</h2>
        <p class="text-base-content/70 text-lg">
            All steps completed - ready to create your accounts and grant access
        </p>
    </div>
    
    <!-- Authentication Status -->
    {% if already_authenticated_plex_user or already_authenticated_discord_user %}
        <div class="space-y-3 mb-8">
            {% if already_authenticated_plex_user %}
                <div class="bg-[#e5a00d]/10 border border-[#e5a00d]/20 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 rounded-full bg-[#e5a00d]/20 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <i class="fa-solid fa-right-to-bracket text-[#e5a00d] text-xs"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-[#e5a00d] mb-1">Plex Account Connected</h4>
                            <p class="text-sm text-base-content/80">
                                Authenticated as <strong class="text-base-content">{{ already_authenticated_plex_user.username }}</strong>
                            </p>
                        </div>
                    </div>
                </div>
            {% endif %}
            {% if already_authenticated_discord_user %}
                <div class="bg-[#5865F2]/10 border border-[#5865F2]/20 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 rounded-full bg-[#5865F2]/20 flex items-center justify-center flex-shrink-0 mt-0.5">
                            <i class="fa-brands fa-discord text-[#5865F2] text-xs"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-[#5865F2] mb-1">Discord Account Connected</h4>
                            <p class="text-sm text-base-content/80">
                                Linked as <strong class="text-base-content">{{ already_authenticated_discord_user.username }}</strong>
                            </p>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endif %}

    <!-- Server Access Summary -->
    <div class="bg-base-100/50 border border-base-300/50 rounded-lg p-6 mb-8">
        <div class="flex items-center justify-center gap-3 mb-4">
            <div class="w-8 h-8 rounded-full bg-success/20 flex items-center justify-center">
                <i class="fa-solid fa-server text-success text-sm"></i>
            </div>
            <h3 class="font-medium text-base-content">Media Server Access Ready</h3>
        </div>
        <div class="space-y-2">
            {% if invite.servers %}
                {% for server in invite.servers %}
                    <div class="flex items-center justify-center gap-2 text-sm">
                        <div class="w-4 h-4 rounded-full bg-success/20 flex items-center justify-center">
                            <i class="fa-solid fa-check text-success text-xs"></i>
                        </div>
                        <span class="font-medium">{{ server.server_nickname }}</span>
                        <span class="text-xs text-base-content/60">({{ server.service_type.name }})</span>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>

    <!-- Accept Invite Button -->
    <div class="text-center space-y-4">
        <form method="post" action="{{ url_for('invites.process_invite_form', invite_path_or_token=invite_path_or_token) }}">
            {{ form.hidden_tag() }}
            <button name="action" value="accept_invite" type="submit" 
                    class="btn btn-primary w-full h-14 text-lg font-medium">
                <i class="fa-solid fa-check mr-2"></i>
                Create All Accounts & Complete Setup
            </button>
        </form>
        <p class="text-xs text-base-content/60">
            This will create your local account and all media server accounts simultaneously
        </p>
    </div>
</div>