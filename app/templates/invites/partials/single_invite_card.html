<!-- Single Invite Card with Selection -->
<div class="invite-card bg-base-100 shadow-xl rounded-lg p-6 hover:shadow-2xl transition-shadow duration-300 cursor-pointer relative" data-invite-id="{{ invite.id }}">
    <!-- Selection Checkbox -->
    <div class="absolute top-4 left-4 z-10">
        <input type="checkbox" class="invite-checkbox checkbox checkbox-primary" value="{{ invite.id }}" onclick="event.stopPropagation();">
    </div>
    
    <!-- Clickable area for selection (everything except buttons) -->
    <div class="invite-card-clickable pl-8">
        <!-- Invite Status Badge -->
        <div class="flex justify-between items-start mb-4">
            <div class="flex items-center space-x-2">
                {% if invite.is_active %}
                    {% if invite.expires_at and invite.expires_at < now %}
                        <span class="badge badge-warning">Expired</span>
                    {% elif invite.max_uses and invite.current_uses >= invite.max_uses %}
                        <span class="badge badge-error">Used Up</span>
                    {% else %}
                        <span class="badge badge-success">Active</span>
                    {% endif %}
                {% else %}
                    <span class="badge badge-neutral">Inactive</span>
                {% endif %}
                
                {% if invite.custom_path %}
                    <span class="badge badge-info badge-outline">Custom Path</span>
                {% endif %}
            </div>
            
            <!-- Action Buttons (non-clickable for selection) -->
            <div class="flex space-x-2" onclick="event.stopPropagation();">
                <button class="btn btn-sm btn-ghost" 
                        hx-get="{{ url_for('invites.view_invite_usages', invite_id=invite.id) }}"
                        hx-target="#usage-modal-content"
                        onclick="usage_modal.showModal()"
                        title="View Usage">
                    <i class="fa-solid fa-chart-line"></i>
                </button>
                
                <button class="btn btn-sm btn-ghost" 
                        hx-get="{{ url_for('invites.edit_invite', invite_id=invite.id) }}"
                        hx-target="#edit-invite-modal-content"
                        onclick="edit_invite_modal.showModal()"
                        title="Edit">
                    <i class="fa-solid fa-edit"></i>
                </button>
                
                <button class="btn btn-sm btn-error" 
                        hx-delete="{{ url_for('invites.delete_invite', invite_id=invite.id) }}"
                        hx-confirm="Are you sure you want to delete this invite?"
                        hx-target="#invite-list-content"
                        hx-swap="innerHTML"
                        title="Delete">
                    <i class="fa-solid fa-trash"></i>
                </button>
            </div>
        </div>

        <!-- Invite Details -->
        <div class="space-y-3">
            <!-- Invite Link -->
            <div>
                <label class="text-sm font-medium text-base-content/70">Invite Link:</label>
                <div class="flex items-center space-x-2 mt-1">
                    {% if invite.custom_path %}
                        <code class="bg-base-200 px-2 py-1 rounded text-sm flex-1">{{ request.url_root }}invite/{{ invite.custom_path }}</code>
                    {% else %}
                        <code class="bg-base-200 px-2 py-1 rounded text-sm flex-1">{{ request.url_root }}invite/{{ invite.token }}</code>
                    {% endif %}
                    <button class="btn btn-xs btn-ghost" 
                            onclick="event.stopPropagation(); copyToClipboard('{% if invite.custom_path %}{{ request.url_root }}invite/{{ invite.custom_path }}{% else %}{{ request.url_root }}invite/{{ invite.token }}{% endif %}')"
                            title="Copy Link">
                        <i class="fa-solid fa-copy"></i>
                    </button>
                </div>
            </div>

            <!-- Usage Information -->
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="text-sm font-medium text-base-content/70">Uses:</label>
                    <p class="text-sm">
                        {{ invite.current_uses }}{% if invite.max_uses %} / {{ invite.max_uses }}{% else %} / âˆž{% endif %}
                    </p>
                </div>
                
                <div>
                    <label class="text-sm font-medium text-base-content/70">Expires:</label>
                    <p class="text-sm">
                        {% if invite.expires_at %}
                            {{ invite.expires_at.strftime('%Y-%m-%d %H:%M') }}
                        {% else %}
                            Never
                        {% endif %}
                    </p>
                </div>
            </div>

            <!-- Created Information -->
            <div>
                <label class="text-sm font-medium text-base-content/70">Created:</label>
                <p class="text-sm">{{ invite.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
            </div>

            <!-- Server Access -->
            {% if invite.invite_servers %}
            <div>
                <label class="text-sm font-medium text-base-content/70">Server Access:</label>
                <div class="flex flex-wrap gap-1 mt-1">
                    {% for invite_server in invite.invite_servers %}
                        <span class="badge badge-outline badge-sm">{{ invite_server.server.name }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Role Assignment -->
            {% if invite.role %}
            <div>
                <label class="text-sm font-medium text-base-content/70">Assigned Role:</label>
                <span class="badge badge-primary badge-sm">{{ invite.role.name }}</span>
            </div>
            {% endif %}

            <!-- Discord Guild Requirement -->
            {% if invite.force_guild_membership is not none %}
            <div>
                <label class="text-sm font-medium text-base-content/70">Discord Guild Required:</label>
                <span class="badge badge-{{ 'success' if invite.force_guild_membership else 'neutral' }} badge-sm">
                    {{ 'Yes' if invite.force_guild_membership else 'No' }}
                </span>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // You could add a toast notification here
        console.log('Copied to clipboard: ' + text);
    }, function(err) {
        console.error('Could not copy text: ', err);
    });
}
</script>